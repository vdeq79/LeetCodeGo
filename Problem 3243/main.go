package main

import "fmt"

func min(a, b int) int {
	if a < b {
		return a
	}
	return b
}

func shortestDistanceAfterQueries(n int, queries [][]int) []int {
	result := make([]int, len(queries))
	prev := make(map[int][]int)
	distFromZero := make([]int, n)

	for i := 1; i < n; i++ {
		prev[i] = append(prev[i], i-1)
		distFromZero[i] = i
	}

	for i := 0; i < len(queries); i++ {
		start := queries[i][0]
		end := queries[i][1]
		prev[end] = append(prev[end], start)

		for v := end; v < n; v++ {
			for _, u := range prev[v] {
				distFromZero[v] = min(distFromZero[v], distFromZero[u]+1)
			}
		}

		result[i] = distFromZero[n-1]
	}

	return result
}

func main() {
	fmt.Println(shortestDistanceAfterQueries(500, [][]int{{25, 124}, {104, 257}, {291, 498}, {59, 346}, {358, 434}, {8, 107}, {132, 190}, {337, 390}, {86, 291}, {57, 139}, {81, 485}, {371, 449}, {66, 451}, {274, 448}, {383, 403}, {242, 408}, {190, 401}, {253, 308}, {14, 126}, {198, 242}, {90, 415}, {354, 356}, {47, 475}, {187, 285}, {68, 191}, {419, 431}, {60, 86}, {322, 464}, {1, 69}, {168, 182}, {7, 249}, {47, 173}, {219, 403}, {164, 410}, {398, 447}, {53, 449}, {118, 267}, {154, 472}, {100, 411}, {28, 320}, {61, 392}, {189, 437}, {339, 472}, {232, 260}, {401, 406}, {1, 66}, {59, 98}, {101, 435}, {41, 279}, {180, 345}, {117, 447}, {182, 281}, {189, 221}, {329, 466}, {179, 300}, {460, 498}, {49, 331}, {458, 473}, {195, 463}, {123, 483}, {289, 350}, {138, 398}, {311, 496}, {78, 376}, {216, 451}, {9, 466}, {159, 289}, {194, 215}, {102, 164}, {302, 355}, {81, 280}, {262, 465}, {236, 459}, {66, 140}, {270, 411}, {28, 487}, {207, 346}, {268, 303}, {269, 487}, {208, 459}, {90, 132}, {423, 462}, {103, 217}, {159, 377}, {155, 424}, {483, 489}, {211, 410}, {289, 411}, {161, 376}, {169, 290}, {207, 475}, {20, 107}, {88, 390}, {274, 322}, {136, 157}, {1, 8}, {43, 71}, {139, 301}, {8, 452}, {110, 268}, {22, 280}, {145, 408}, {143, 413}, {380, 411}, {452, 489}, {326, 416}, {135, 232}, {188, 222}, {107, 209}, {33, 391}, {105, 401}, {1, 152}, {172, 423}, {228, 446}, {168, 392}, {175, 227}, {273, 435}, {312, 369}, {22, 184}, {45, 352}, {11, 13}, {19, 57}, {189, 451}, {157, 230}, {126, 305}, {383, 450}, {155, 337}, {297, 321}, {93, 400}, {16, 438}, {54, 453}, {59, 146}, {416, 489}, {78, 308}, {113, 462}, {359, 472}, {78, 132}, {22, 489}, {296, 413}, {0, 364}, {244, 493}, {204, 301}, {376, 448}, {291, 447}, {65, 129}, {183, 360}, {65, 441}, {165, 218}, {233, 440}, {211, 246}, {34, 79}, {130, 424}, {346, 446}, {91, 324}, {303, 428}, {417, 471}, {389, 428}, {23, 476}, {91, 299}, {220, 248}, {108, 245}, {188, 201}, {130, 150}, {63, 307}, {48, 56}, {46, 419}, {1, 325}, {35, 50}, {66, 70}, {85, 418}, {299, 328}, {194, 264}, {441, 454}, {290, 297}, {64, 436}, {18, 269}, {153, 415}, {50, 375}, {269, 398}, {346, 382}, {439, 487}, {353, 397}, {48, 151}, {110, 479}, {116, 224}, {214, 360}, {378, 380}, {3, 303}, {239, 367}, {288, 366}, {393, 421}, {21, 367}, {81, 353}, {145, 459}, {157, 352}, {134, 301}, {401, 462}, {10, 125}, {27, 475}, {74, 136}, {79, 95}, {111, 358}, {108, 242}, {51, 422}, {268, 406}, {161, 314}, {158, 163}, {83, 132}, {131, 230}, {167, 248}, {93, 349}, {126, 415}, {80, 232}, {332, 448}, {302, 392}, {81, 465}, {172, 404}, {85, 259}, {22, 49}, {291, 406}, {137, 293}, {21, 237}, {70, 134}, {9, 350}, {349, 352}, {387, 443}, {242, 491}, {69, 435}, {130, 365}, {189, 471}, {134, 220}, {35, 130}, {23, 161}, {31, 297}, {78, 333}, {4, 382}, {169, 311}, {138, 210}, {229, 329}, {170, 214}, {164, 231}, {227, 359}, {209, 363}, {188, 378}, {87, 463}, {163, 401}, {77, 224}, {79, 151}, {250, 280}, {286, 494}, {273, 394}, {304, 487}, {362, 427}, {372, 447}, {320, 418}, {9, 319}, {163, 425}, {100, 171}, {260, 421}, {220, 281}, {12, 296}, {333, 341}, {315, 344}, {158, 307}, {71, 276}, {208, 289}, {78, 141}, {402, 431}, {133, 177}, {97, 443}, {4, 43}, {213, 354}, {261, 328}, {246, 369}, {204, 278}, {202, 245}, {128, 437}, {232, 247}, {29, 164}, {259, 382}, {136, 271}, {156, 269}, {237, 422}, {82, 359}, {63, 116}, {162, 189}, {110, 347}, {262, 395}, {156, 444}, {43, 453}, {340, 446}, {467, 489}, {239, 496}, {193, 399}, {418, 477}, {34, 67}, {224, 487}, {108, 303}, {172, 266}, {168, 337}}))
}
